$(document).ready(function(){	var FADING_TIME = 800;	var socket;	var me, vs;	var amIplaying = false;		$('#joinForm').submit(function(){			var username = $('input[name=username]').val();		if (username == '' || username == null) return;				socket = new io.connect('http://localhost:5555/');				socket.on('error', function(error){			console.log('Error ' + error.code + ': ' + error.msg);		});				socket.on('connect', function(){			console.log(socket);			socket.emit('joins', { username: username }, function(username){				me = username;				$('#joinForm').fadeOut(FADING_TIME/2, function(){					$('#player1')						.text(me)						.fadeIn(FADING_TIME);					$('#score1')						.attr('name', me)						.text('0')						.fadeIn(FADING_TIME);				});			});		});		socket.on('start', function(startInfo){			for (var p=0; p < startInfo.players.length; p++){				vs = startInfo.players[p];				if (vs != me ){					$('#player2')						.text(vs)						.fadeIn(FADING_TIME * 2);					$('#score2')						.attr('name', vs)						.text('0')						.fadeIn(FADING_TIME * 2);					break;				}			}			$('.score').fadeIn();			amIplaying = startInfo.players[0] == me;			highlightPlayer();			setTimeout(function(){				$('.card').on('click', function(){					console.log($(this).attr('id'));					socket.emit('discover', { id: $(this).attr('id') });				});			}, 3 * 1000);		});				socket.on('discover', function(card){			$('#' + card.id).attr('src', card.src);		});				socket.on('fail', function(cards){			console.log('Fail');			amIplaying = !amIplaying;			highlightPlayer();			setTimeout(function(){				$(cards.ids).each(function(){					$('#'+this).attr('src', cards.src);				});						}, 1500);		});				socket.on('success', function(cards){			$(cards.ids).each(function(){				$('#'+this).off('click');			});		});				socket.on('score', function(newScore){			$('span[name="' + newScore.username + '"]').text(newScore.score);		});				socket.on('finish', function(){			socket.disconnect();			console.log('Se acabo');		});				return false;	});		function highlightPlayer(){		var selectores = amIplaying? [ $('#player1'), $('#player2')] : [ $('#player2'), $('#player1')];		selectores[0].css("text-shadow", "2px 5px 2px green");		selectores[1].css("text-shadow", "");	}});